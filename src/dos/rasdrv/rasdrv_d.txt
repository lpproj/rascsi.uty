README for RASDRV DOS edition (beta release)
(in Japanese, encoded with CP932 Shift_JIS)

概略
----

RaSCSIのリモートドライブ（ブリッジデバイス）をMS-DOS用のドライブとして
使用できるようにする常駐プログラムです。
X68000用RASDRV.SYSとほぼ同じ機能を提供しますが、DOSの仕様その他の理由により
X68000用にくらべて機能が若干制限されています。

本ソフトウェアは完全に無保証です。


動作環境
--------

PC-98x1 SCSI BIOS版(RASDRV55.EXE):

・RaSCSI (バージョン1.47にて動作確認）
・バージョン 3.1以上のMS-DOS、もしくはFreeDOS(KE2042以上)
・NEC PC-98シリーズ（およびその互換機）
・PC-9801-55互換のSCSI BIOSをサポートするSCSIボード


ASPI版(RASDRVAS.EXE):

・RaSCSI (バージョン1.47にて動作確認）
・バージョン 3.1以上のMS-DOS、もしくはFreeDOS(KE2042以上)
・利用したいSCSIアダプタ用のDOS版ASPIドライバ


RASDRV55はPC-98シリーズのSCSI BIOSを利用するため、PC-98シリーズ
専用となります。（SCSIボードの設定でBIOSを無効にしている場合は
使用できません。BIOSを有効にするか、BIOSなしでも動作する
そのSCSIボード専用のASPIドライバとRASDRVASをお使いください）

RASDRVASはDOS汎用であり、PC-98シリーズ以外でも動作します。


用法
----

まずCONFIG.SYS中に LASTDRIVE=Z の記述があるか確認し、ない場合は書き足して
DOSを再起動してください。ASPI版を使用する場合はASPIドライバもインストール
しておきます。

DOSのコマンドライン、もしくはautoexec.bat内からrasdrv55もしくはrasdrvasを
実行し、ドライバを常駐させます。
（当初デバイスドライバとして登録可能にする予定でしたが、MS-DOSの制約により
断念しました）
rasdrv55とrasdrvasのコマンドラインオプションはほぼ同じです。rasdrv55を
例にすると以下のようになります。

  RASDRV55 -In -Ddrive:basedir [-!params]

    -I  ブリッジデバイスのSCSI IDを0〜6までの数字で指定。省略時は-I6
    -D  DOS側のドライブ文字とRaSCSI側のベースディレクトリを指定。
    -!  リモートドライブ初期化時、RaSCSIに渡すオプション引数を指定。
        現時点(RaSCSI1.47)で有効と思われるオプション:

        +A      ファイル名を 8+3 文字の形式に変換
        +C      ファイル名の大文字／小文字を区別する
                （指定した場合、ファイル名に小文字を含むファイルや
                ディレクトリはDOSからアクセスできなくなる。常駐開始時の
                ベースディレクトリも対象となるため、ほぼ常駐失敗となる）
        +E      ファイル名先頭の . を _ に変換
        +e      ファイル名先頭の . を消去
        +P      ファイル名に含まれる . をすべて _ に変換
        +p      ファイル名に含まれる . をすべて消去
        +N      ファイル名先頭の - を _ に変換
        +n      ファイル名先頭の - を消去
        +H      ファイル名に含まれる - をすべて _ に変換
        +h      ファイル名に含まれる - をすべて消去
        +X      ファイル名に含まれる + と = をすべて _ に変換
        +x      ファイル名に含まれる + と = をすべて消去
        +S      ファイル名に含まれる空白文字をすべて _ に変換
        +s      ファイル名に含まれる空白文字をすべて消去

        オプションは -!+AEs -!+X などのように複数指定可能。


用例：

  RASDRV55 -I6 -DX:/home/pi

    ID6のブリッジデバイスを X:ドライブとしてマウントする。
    RaSCSI(Raspbian) の /home/pi が X:ドライブのルートディレクトリになる。

本家RASDRV.SYSと異なり、複数のドライブユニットをマウントできません（手抜き）。

用例2：

  RASDRV55 -R

    RASDRVの常駐を解除する。INT 2Fhのベクタが他のプログラムにフックされている
    場合は常駐解除できない。


注意および制限事項
------------------

・DOSのファイル形式（ファイル名1〜8文字で拡張子なし、もしくは
  ファイル名1〜8文字＋拡張子1〜3文字）に合致しないファイルはアクセス
  できません。
・DOSの仕様により、ファイル名はすべて大文字化されます。
・オプション -! で指定した初期化オプションは、rasdrv以外のプログラム
  （rascpyなど）によってリモートドライブが初期化された場合リセットされます。
・一部ファイラー(FDやFILMTN)でリモートドライブのドライブ情報が正しく
  表示されません。何でですかね…（調査中）。
・（重要）RaSCSIは通常root権限で動作しており、リモートドライブに転送された
  ファイルもroot権限となります。つまり、rascsiのリモートドライブ上で
  アクセスできるファイルは「ほぼすべて」上書き可能です。
  使い方次第でRaspbianのシステムを簡単かつ不用意に破壊できてしまうため、
  パス名の記述には十分な注意を払ってください。
  （-Dオプションでルート / をベースディレクトリにすることはおすすめできません）


ソース
------

https://github.com/lpproj/rascsi.uty/tree/master/src/dos/rasdrv

ビルドにはnasm、OpenWatcomのリンカ(wlink)とmake(wmake)が必要です。

ソースの利用条件は UNLICENSE に準じます。つまり「ほぼパブリックドメイン
であり無保証」です。ライセンスの詳細は以下をご確認ください。

http://unlicense.org/
https://ja.wikipedia.org/wiki/Unlicense

